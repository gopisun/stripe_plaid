<!-- Wappler include head-page="layouts/admin" fontawesome_5="cdn" bootstrap5="local" is="dmx-app" id="StripePayment" appConnect="local" components="{dmxStripe:{},dmxDatastore:{},dmxBrowser:{},dmxFormatter:{},dmxBootstrap5TableGenerator:{}}" -->
<dmx-stripe id="stripe1" key="pk_test_51KTpYoCkYyWRehNVd4knuhMT4BOGugJfVBQDzGxsUwnOukBD6TxGEF6TTSJaJIaEMibIyzejL1AAbsBm4PxUojVS00xUIU4twZ" dmx-bind:line-items="ds_shoppingCart.data" checkout="server" session-url="https://x8ki-letl-twmt.n7.xano.io/api:U_4KYAYD/sessions"></dmx-stripe>
<div is="dmx-browser" id="browser1"></div>
<meta name="ac:route" content="/stripeXanoPayment2">

<dmx-datastore id="ds_shoppingCart"></dmx-datastore>

<div class="modal" id="md_shoppingCart" is="dmx-bs5-modal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Shopping Cart</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">






                <form is="dmx-stripe-checkout-form" id="form2" method="post" action="https://x8ki-letl-twmt.n7.xano.io/api:U_4KYAYD/sessions" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-multi="true" dmx-populate="ds_shoppingCart.data">

                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Id</th>
                                <th scope="col">Price</th>
                                <th scope="col">Quantity</th>
                            </tr>
                        </thead>
                        <tbody id="line_items" is="dmx-repeat" dmx-bind:repeat="ds_shoppingCart.data">

                            <tr>
                                <td>
                                    <div class="col">
                                        <input type="number" class="form-control" id="inp_$id" name="$id" dmx-bind:id="insp_$id_{{$index}}" dmx-bind:aria-describedby="insp_$id_{{$index}}_help" dmx-bind:name="line_items[{{$index}}][description]" dmx-bind:value="$id" aria-describedby="inp_$id_help" placeholder="Enter id" readonly="true">
                                    </div>
                                </td>
                                <td>
                                    <div class="col">
                                        <input type="text" class="form-control" id="inp_price" name="price" dmx-bind:id="insp_price_{{$index}}" dmx-bind:aria-describedby="insp_price_{{$index}}_help" dmx-bind:name="line_items[{{$index}}][price]" dmx-bind:value="price" aria-describedby="inp_price_help" placeholder="Enter Price" readonly="true">
                                    </div>
                                </td>
                                <td>
                                    <div class="col">
                                        <input type="number" class="form-control" id="inp_quantity" name="quantity" dmx-bind:id="insp_quantity_{{$index}}" dmx-bind:aria-describedby="insp_quantity_{{$index}}_help" dmx-bind:name="line_items[{{$index}}][quantity]" dmx-bind:value="quantity" aria-describedby="inp_quantity_help" placeholder="Enter Quantity" readonly="true">
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </form>


            </div>
            <div class="modal-footer">
                <button id="btn4" class="btn btn-primary" dmx-on:click="stripe1.checkout()">Checkout</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" dmx-on:click="md_shoppingCart.hide()">Continue Shopping</button>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <form id="form1" method="post" is="dmx-api-form" action="https://x8ki-letl-twmt.n7.xano.io/api:U_4KYAYD/sessions" success-url="/successPage" dmx-on:success="browser1.goto(form1.data.url)">
        <div class="row">
            <div class="col">
                <input id="price_id" name="price" type="hidden" class="form-control" value="price_1KTug0CkYyWRehNVjERTJg4K" dmx-bind:name="'line_items[0][price]'">
            </div>
            <div class="col-5">
                <img src="/assets/img/images.jpeg">
                <img src="/assets/img/iphone13proMax.jpeg">
            </div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col">
                <input id="qty" name="quantity" type="hidden" class="form-control" value="1" dmx-bind:name="'line_items[0][quantity]'">
            </div>
            <div class="col">
                <h3 class="text-center">iPhone 13 Pro Max $1299</h3>
            </div>
            <div class="col"></div>
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="align-self-center text-center col-1">
                <button id="btn_submit" class="btn btn-primary form-control" dmx-on:click="form1.submit()">Buy Now</button>
            </div>
            <div class="col"></div>
        </div>

    </form>



</div>
<div class="container mt-4">
    <div class="row">
        <div class="col align-self-end">
            <div class="card">
                <img class="card-img-top" alt="Card image cap" src="/assets/img/iPhone13ProMax.png">
                <div class="card-body">
                    <h4 class="card-title">iPhone 13 pro Max</h4>
                    <p class="card-text">Price $1,299</p>
                    <a href="#" class="btn btn-primary" dmx-on:click="ds_shoppingCart.upsert({product_id: 1, price: 'price_1KTug0CkYyWRehNVjERTJg4K'},{price: 'price_1KTug0CkYyWRehNVjERTJg4K', quantity: `quantity + 1`, product_id: 1, product_price: 1299, product_name: 'iPhone 13 Pro Max'});md_shoppingCart.show()">Add to Cart</a>
                </div>
            </div>
        </div>
        <div class="col align-self-end">
            <div class="card">
                <img class="card-img-top" alt="Card image cap" src="/assets/img/iPhone13.png">
                <div class="card-body">
                    <h4 class="card-title">iPhone 13 Standard</h4>
                    <p class="card-text">Price $899</p>
                    <a href="#" class="btn btn-primary" dmx-on:click="ds_shoppingCart.upsert({product_id: 2, price: 'price_1KTuiGCkYyWRehNVM0m20rDk'},{price: 'price_1KTuiGCkYyWRehNVM0m20rDk', quantity: `quantity + 1`, product_id: 2, product_price: 899, product_name: 'iPhone 13 Standard'});md_shoppingCart.show()">Add to Cart</a>
                </div>
            </div>
        </div>
        <div class="col align-self-end">
            <div class="card">
                <img class="card-img-top" alt="Card image cap" src="/assets/img/samsungS21grey.png">
                <div class="card-body">
                    <h4 class="card-title">Samsung Galaxy S21 Ultra</h4>
                    <p class="card-text">Price $1,299</p>
                    <a href="#" class="btn btn-primary" dmx-on:click="ds_shoppingCart.upsert({product_id: 3, price: 'price_1KTuj9CkYyWRehNVEpaOSCvO'},{price: 'price_1KTuj9CkYyWRehNVEpaOSCvO', product_id: 3, product_price: 1299, product_name: 'Samsung Galaxy S21 Ultra', quantity: `quantity + 1`});md_shoppingCart.show()">Add to Cart</a>
                </div>
            </div>
        </div>
        <div class="col align-self-end">
            <div class="card">
                <img class="card-img-top h-auto" alt="Card image cap" src="/assets/img/samsungS21.png" width="50px" height="40px">
                <div class="card-body">
                    <h4 class="card-title">Samsung Galaxy S21</h4>
                    <p class="card-text">Price $999</p>
                    <a href="#" class="btn btn-primary" dmx-on:click="ds_shoppingCart.upsert({product_id: 4, price: 'price_1KTuhSCkYyWRehNVEtMS3yLq'},{price: 'price_1KTuhSCkYyWRehNVEtMS3yLq', quantity: `quantity + 1`, product_id: 4, product_price: 899, product_name: 'Samsung Galaxy S21'});md_shoppingCart.show()">Add to Cart</a>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">

        </div>
    </div>

</div>


<!--

    <form is="dmx-serverconnect-form" id="form2" method="post" action="https://x8ki-letl-twmt.n7.xano.io/api:U_4KYAYD/sessions" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-multi="true" dmx-populate="ds_shoppingCart.data">
                            <div id="line_items" is="dmx-repeat" dmx-bind:repeat="ds_shoppingCart.data">
                                <tr>
                                    <td>
                                        <div class="col">
                                            <input type="number" class="form-control" id="inp_$id" name="$id" dmx-bind:id="insp_$id_{{$index}}" dmx-bind:aria-describedby="insp_$id_{{$index}}_help" dmx-bind:name="line_items[{{$index}}][id]" dmx-bind:value="ds_shoppingCart.data[{{$index}}].id" aria-describedby="inp_$id_help" placeholder="Enter id" readonly="true">
                                        </div>
                                    </td>
                                    <td>
                                        <div class="col">
                                            <input type="text" class="form-control" id="inp_price" name="price" dmx-bind:id="insp_price_{{$index}}" dmx-bind:aria-describedby="insp_price_{{$index}}_help" dmx-bind:name="line_items[{{$index}}][price]" dmx-bind:value="" aria-describedby="inp_price_help" placeholder="Enter Price" readonly="true">
                                        </div>
                                    </td>
                                    <td>
                                        <div class="col">
                                            <input type="number" class="form-control" id="inp_quantity" name="quantity" dmx-bind:id="insp_quantity_{{$index}}" dmx-bind:aria-describedby="insp_quantity_{{$index}}_help" dmx-bind:name="line_items[{{$index}}][quantity]" dmx-bind:value="ds_shoppingCart.data[{{$index}}].quantity" aria-describedby="inp_quantity_help" placeholder="Enter Quantity" readonly="true">
                                        </div>
                                    </td>
                                </tr>
                            </div>
                        </form>


                        <form is="dmx-serverconnect-form" id="form2" method="post" action="https://x8ki-letl-twmt.n7.xano.io/api:U_4KYAYD/sessions" dmx-generator="bootstrap5" dmx-form-type="vertical" dmx-multi="true" dmx-populate="ds_shoppingCart.data">
                            <div id="record" is="dmx-repeat" dmx-bind:repeat="ds_shoppingCart.data">
                                <div class="mb-3">
                                    <label for="inp_$id" dmx-bind:for="insp_$id_{{$index}}">$id</label>
                                    <input type="number" class="form-control" id="inp_$id" name="$id" dmx-bind:id="insp_$id_{{$index}}" dmx-bind:aria-describedby="insp_$id_{{$index}}_help" dmx-bind:name="record[{{$index}}][$id]" dmx-bind:value="$id" aria-describedby="inp_$id_help" placeholder="Enter $id">
                                </div>
                                <div class="mb-3">
                                    <label for="inp_price" dmx-bind:for="insp_price_{{$index}}">Price</label>
                                    <input type="text" class="form-control" id="inp_price" name="price" dmx-bind:id="insp_price_{{$index}}" dmx-bind:aria-describedby="insp_price_{{$index}}_help" dmx-bind:name="record[{{$index}}][price]" dmx-bind:value="price" aria-describedby="inp_price_help" placeholder="Enter Price">
                                </div>
                                <div class="mb-3">
                                    <label for="inp_quantity" dmx-bind:for="insp_quantity_{{$index}}">Quantity</label>
                                    <input type="number" class="form-control" id="inp_quantity" name="quantity" dmx-bind:id="insp_quantity_{{$index}}" dmx-bind:aria-describedby="insp_quantity_{{$index}}_help" dmx-bind:name="record[{{$index}}][quantity]" dmx-bind:value="quantity" aria-describedby="inp_quantity_help" placeholder="Enter Quantity">
                                </div>
                            </div>
                        </form>
    -->